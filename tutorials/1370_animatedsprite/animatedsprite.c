// 1370 AnimatedSprite - Multi-frame sprite animation
// Ported from OscarTutorials to F256K using f256lib

#include "f256lib.h"

const char SpriteImage[4][64] = {
	{
	0b00000000, 0b11111000, 0b00000000,
	0b00000011, 0b01101110, 0b00000000,
	0b00001100, 0b11100111, 0b10000000,
	0b00010001, 0b11100011, 0b11000000,
	0b00111100, 0b00011110, 0b00100000,
	0b00111100, 0b00011111, 0b00100000,
	0b01111000, 0b00011111, 0b00010000,
	0b01111000, 0b00011111, 0b00010000,
	0b11111000, 0b00011111, 0b10001000,
	0b11110000, 0b00011111, 0b10001000,
	0b10001111, 0b11100000, 0b01111000,
	0b10001111, 0b11100000, 0b01111000,
	0b10000111, 0b11100000, 0b01111000,
	0b01000111, 0b11100000, 0b11110000,
	0b01000111, 0b11100000, 0b11110000,
	0b00100011, 0b11100000, 0b11100000,
	0b00100011, 0b11100001, 0b11100000,
	0b00011110, 0b00011100, 0b01000000,
	0b00001111, 0b00011001, 0b10000000,
	0b00000011, 0b10010110, 0b00000000,
	0b00000000, 0b11111000, 0b00000000,
	}, {
	0b00000000, 0b11111000, 0b00000000,
	0b00000011, 0b00100110, 0b00000000,
	0b00001100, 0b01110001, 0b10000000,
	0b00011000, 0b01110000, 0b11000000,
	0b00101111, 0b00000111, 0b10100000,
	0b00101111, 0b00000111, 0b10100000,
	0b01011110, 0b00000011, 0b11010000,
	0b01011110, 0b00000011, 0b11010000,
	0b10011110, 0b00000011, 0b11001000,
	0b10111110, 0b00000011, 0b11101000,
	0b11000001, 0b11111100, 0b00011000,
	0b11000001, 0b11111100, 0b00011000,
	0b11100001, 0b11111100, 0b00111000,
	0b01100001, 0b11111100, 0b00110000,
	0b01100001, 0b11111100, 0b00110000,
	0b00110000, 0b11111000, 0b01100000,
	0b00110000, 0b11111000, 0b01100000,
	0b00010111, 0b10001111, 0b01000000,
	0b00001111, 0b10001111, 0b10000000,
	0b00000011, 0b11011110, 0b00000000,
	0b00000000, 0b11111000, 0b00000000,
	}, {
	0b00000000, 0b11111000, 0b00000000,
	0b00000011, 0b10010110, 0b00000000,
	0b00001111, 0b00011001, 0b10000000,
	0b00011110, 0b00011100, 0b01000000,
	0b00100011, 0b11100001, 0b11100000,
	0b00100011, 0b11100000, 0b11100000,
	0b01000111, 0b11100000, 0b11110000,
	0b01000111, 0b11100000, 0b11110000,
	0b10000111, 0b11100000, 0b01111000,
	0b10001111, 0b11100000, 0b01111000,
	0b11110000, 0b00011111, 0b10001000,
	0b11110000, 0b00011111, 0b10001000,
	0b11111000, 0b00011111, 0b10001000,
	0b01111000, 0b00011111, 0b00010000,
	0b01111000, 0b00011111, 0b00010000,
	0b00111100, 0b00011111, 0b00100000,
	0b00111100, 0b00011110, 0b00100000,
	0b00010001, 0b11100011, 0b11000000,
	0b00001100, 0b11100111, 0b10000000,
	0b00000011, 0b01101110, 0b00000000,
	0b00000000, 0b11111000, 0b00000000,
	}, {
	0b00000000, 0b11111000, 0b00000000,
	0b00000011, 0b11011110, 0b00000000,
	0b00001111, 0b10001111, 0b10000000,
	0b00010111, 0b10001111, 0b01000000,
	0b00110000, 0b11111000, 0b01100000,
	0b00110000, 0b11111000, 0b01100000,
	0b01100001, 0b11111100, 0b00110000,
	0b01100001, 0b11111100, 0b00110000,
	0b11100001, 0b11111100, 0b00111000,
	0b11000001, 0b11111100, 0b00011000,
	0b10111110, 0b00000011, 0b11101000,
	0b10111110, 0b00000011, 0b11101000,
	0b10011110, 0b00000011, 0b11001000,
	0b01011110, 0b00000011, 0b11010000,
	0b01011110, 0b00000011, 0b11010000,
	0b00101111, 0b00000111, 0b10100000,
	0b00101111, 0b00000111, 0b10100000,
	0b00011000, 0b01110000, 0b11000000,
	0b00001100, 0b01110001, 0b10000000,
	0b00000011, 0b00100110, 0b00000000,
	0b00000000, 0b11111000, 0b00000000,
	}
};

int main(int argc, char *argv[])
{
	spriteInit();

	// Expand all 4 animation frames into slots 0-3
	for (byte f = 0; f < 4; f++)
		spriteExpand(SpriteImage[f], f, 1);  // white

	// Set sprites on screen
	for (byte i = 0; i < 8; i++)
		spriteSet(i, true, 20 + 30 * i, 40 + 20 * i, 0, 1);

	byte y = 0;
	while (true)
	{
		for (byte i = 0; i < 8; i++)
		{
			spriteMove(i, 20 + 30 * i, 40 + 20 * i + y);
			byte frame = ((y >> 2) + i) & 3;
			spriteSetImage(i, frame);
		}
		y++;
		graphicsWaitVerticalBlank();
	}

	return 0;
}
